{# ----------------------------------------------------------#}
{# üöÄ Template Jinja2 Detalhado para Gerar POM BOM ou POM Parent  #}
{#    Abusando de coment√°rios, √≠cones e explica√ß√µes de cada tag   #}
{# Basta preencher o contexto com as chaves adequadas; se alguma #}
{# se√ß√£o n√£o se aplicar, omita-a ou passe como lista/dicion√°rio   #}
{# vazio.                                                        #}
{# ----------------------------------------------------------#}

<?xml version="1.0" encoding="UTF-8"?>
<project
    xmlns="http://maven.apache.org/POM/4.0.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd">

    <!-- üîñ (0) Vers√£o do modelo POM (sempre 4.0.0) -->
    <!--
      üìå modelVersion: Define a vers√£o do formato POM que este arquivo utiliza.
      üëç Sempre "4.0.0" para projetos Maven 2 e superiores.
      üéØ Sem essa tag, o Maven n√£o reconhecer√° corretamente este POM.
    -->
    <modelVersion>{{ modelVersion or "4.0.0" }}</modelVersion>

    <!-- üì¶ (1) Coordenadas principais (sempre obrigat√≥rias) -->
    <!--
      Estas tags s√£o o "DNA" do seu projeto Maven. S√£o essenciais para identificar
      o artefato dentro de reposit√≥rios e determinar sua posi√ß√£o na hierarquia de depend√™ncias.
    -->

    <!-- üÜî groupId: Identifica a organiza√ß√£o ou grupo que produz este artefato.
         Exemplo: "com.acme", "org.exemplo.projeto"
         Deve ser √∫nico e seguir conven√ß√µes de dom√≠nio invertido. -->
    <groupId>{{ groupId }}</groupId>

    <!-- üìõ artifactId: Nome do artefato gerado (JAR, BOM, etc.).
         Deve ser √∫nico dentro do groupId.
         Exemplo: "meu-bom", "api-core", "servi√ßo-web". -->
    <artifactId>{{ artifactId }}</artifactId>

    <!-- üè∑Ô∏è version: Vers√£o deste artefato.
         Pode seguir semver: "1.0.0", "2.5.3-SNAPSHOT", etc.
         "-SNAPSHOT" indica vers√£o em desenvolvimento, n√£o release. -->
    <version>{{ version }}</version>

    <!-- üì¶ packaging: Tipo de empacotamento.
         "pom" para BOMs ou Parent POMs.
         Outros exemplos: "jar", "war", "ear".
         Se omitido, o Maven usa "jar" por padr√£o. -->
    <packaging>{{ packaging or "pom" }}</packaging>

    <!-- üìù name: Nome leg√≠vel do projeto.
         Pode conter espa√ßos, emojis, descri√ß√µes mais ricas.
         √ötil para relat√≥rios e interfaces gr√°ficas de IDEs. -->
    <name>{{ name }}</name>

    {% if description %}
    <!-- üìã description: Descri√ß√£o detalhada do projeto.
         Explique o prop√≥sito, funcionalidades, contexto.
         Ferramentas e reposit√≥rios podem exib√≠-la para usu√°rios. -->
    <description>{{ description }}</description>
    {% endif %}

    {% if url %}
    <!-- üåê url: Endere√ßo principal do projeto (site, GitHub, wiki).
         Incentiva visibilidade e aponta para documenta√ß√£o adicional. -->
    <url>{{ url }}</url>
    {% endif %}

    {% if inceptionYear %}
    <!-- üìÖ inceptionYear: Ano de in√≠cio do desenvolvimento.
         Permite rastrear quanto tempo o projeto existe.
         Ex: "2023", "2015". -->
    <inceptionYear>{{ inceptionYear }}</inceptionYear>
    {% endif %}


    {# ----------------------------------------------------------#}
    {# üîó (2) Parent of Parent                                        #}
    {#    Quando este POM herda de outro POM (por ex., m√≥dulo filho)  #}
    {# ----------------------------------------------------------#}
    {% if parent %}
    <parent>
        <!-- üÜî parent.groupId: Identifica o grupo do POM pai. -->
        <groupId>{{ parent.groupId }}</groupId>

        <!-- üìõ parent.artifactId: Nome do POM pai. -->
        <artifactId>{{ parent.artifactId }}</artifactId>

        <!-- üè∑Ô∏è parent.version: Vers√£o do POM pai. -->
        <version>{{ parent.version }}</version>

        {% if parent.relativePath %}
        <!-- üõ£Ô∏è relativePath: Caminho relativo para encontrar o POM pai no sistema de arquivos.
             Por exemplo: "../pai/pom.xml".
             Se omitido, o Maven tenta buscar no reposit√≥rio remoto padr√£o. -->
        <relativePath>{{ parent.relativePath }}</relativePath>
        {% endif %}
    </parent>
    {% endif %}


    {# ----------------------------------------------------------#}
    {# üè¢ (3) Metadados opcionais: organiza√ß√£o, licen√ßas, SCM, issue,  #}
    {#       CI, mailing lists                                          #}
    {# ----------------------------------------------------------#}

    {% if organization %}
    <organization>
        <!-- üè≠ organization.name: Nome da organiza√ß√£o ou empresa propriet√°ria. -->
        <name>{{ organization.name }}</name>
        <!-- üåç organization.url: URL oficial da organiza√ß√£o. -->
        <url>{{ organization.url }}</url>
    </organization>
    {% endif %}

    {% if licenses %}
    <licenses>
        {% for license in licenses %}
        <license>
            <!-- üìú license.name: Nome da licen√ßa (ex.: Apache License 2.0). -->
            <name>{{ license.name }}</name>
            <!-- üîó license.url: Link para o texto completo da licen√ßa. -->
            <url>{{ license.url }}</url>
            {% if license.distribution %}
            <!-- üöö license.distribution: Indica como a licen√ßa √© distribu√≠da (ex.: repo, manual). -->
            <distribution>{{ license.distribution }}</distribution>
            {% endif %}
            {% if license.comments %}
            <!-- üí¨ license.comments: Coment√°rios extras sobre a licen√ßa. -->
            <comments>{{ license.comments }}</comments>
            {% endif %}
        </license>
        {% endfor %}
    </licenses>
    {% endif %}

    {% if scm %}
    <scm>
        <!-- üîó scm.connection: Conex√£o an√¥nima (read-only) para o sistema de controle de vers√£o. -->
        <connection>{{ scm.connection }}</connection>
        <!-- üîí scm.developerConnection: Conex√£o para desenvolvedores (read/write). -->
        <developerConnection>{{ scm.developerConnection }}</developerConnection>
        <!-- üåê scm.url: URL web para navegar no reposit√≥rio (por ex., GitHub). -->
        <url>{{ scm.url }}</url>
        {% if scm.tag %}
        <!-- üîñ scm.tag: Tag ou branch padr√£o a ser usada (ex.: "master", "v1.0.0"). -->
        <tag>{{ scm.tag }}</tag>
        {% endif %}
    </scm>
    {% endif %}

    {% if issueManagement %}
    <issueManagement>
        <!-- üêõ issueManagement.system: Nome da ferramenta de rastreamento de issues (ex.: JIRA). -->
        <system>{{ issueManagement.system }}</system>
        <!-- üîó issueManagement.url: Link para o tracker de issues (ex.: https://issues.example.com). -->
        <url>{{ issueManagement.url }}</url>
    </issueManagement>
    {% endif %}

    {% if ciManagement %}
    <ciManagement>
        <!-- ü§ñ ciManagement.system: Nome do sistema de Integra√ß√£o Cont√≠nua (ex.: Jenkins). -->
        <system>{{ ciManagement.system }}</system>
        <!-- üîó ciManagement.url: URL para acessar o pipeline CI (ex.: https://ci.example.com). -->
        <url>{{ ciManagement.url }}</url>
    </ciManagement>
    {% endif %}

    {% if mailingLists %}
    <mailingLists>
        {% for ml in mailingLists %}
        <mailingList>
            <!-- ‚úâÔ∏è ml.name: Nome da lista de e-mails (ex.: dev@example.com). -->
            <name>{{ ml.name }}</name>
            <!-- ‚ûï ml.subscribe: Endere√ßo/caminho para inscri√ß√£o na lista. -->
            <subscribe>{{ ml.subscribe }}</subscribe>
            <!-- ‚ûñ ml.unsubscribe: Endere√ßo/caminho para remo√ß√£o da lista. -->
            <unsubscribe>{{ ml.unsubscribe }}</unsubscribe>
            <!-- üì® ml.post: Endere√ßo para envio de mensagens √† lista. -->
            <post>{{ ml.post }}</post>
            <!-- üì¶ ml.archive: URL do arquivo de e-mails arquivados. -->
            <archive>{{ ml.archive }}</archive>
        </mailingList>
        {% endfor %}
    </mailingLists>
    {% endif %}


    {# ----------------------------------------------------------#}
    {# üë• (4) Desenvolvedores e Contribuidores                       #}
    {# ----------------------------------------------------------#}

    {% if developers %}
    <developers>
        {% for dev in developers %}
        <developer>
            <!-- üÜî dev.id: Identificador √∫nico do desenvolvedor (ex.: user login). -->
            <id>{{ dev.id }}</id>
            <!-- üôç dev.name: Nome completo do desenvolvedor. -->
            <name>{{ dev.name }}</name>
            <!-- üìß dev.email: E-mail de contato do desenvolvedor. -->
            <email>{{ dev.email }}</email>
            {% if dev.organization %}
            <!-- üè¢ dev.organization: Organiza√ß√£o a que o dev pertence (ex.: "Acme Corp"). -->
            <organization>{{ dev.organization }}</organization>
            {% endif %}
            {% if dev.organizationUrl %}
            <!-- üåê dev.organizationUrl: Website da organiza√ß√£o do dev. -->
            <organizationUrl>{{ dev.organizationUrl }}</organizationUrl>
            {% endif %}
            {% if dev.roles %}
            <!-- üé≠ dev.roles: Pap√©is do desenvolvedor neste projeto (ex.: "Lead", "Maintainer"). -->
            <roles>
                {% for role in dev.roles %}
                <role>{{ role }}</role>
                {% endfor %}
            </roles>
            {% endif %}
            {% if dev.timezone %}
            <!-- üïë dev.timezone: Fuso hor√°rio do desenvolvedor (ex.: "America/Sao_Paulo"). -->
            <timezone>{{ dev.timezone }}</timezone>
            {% endif %}
        </developer>
        {% endfor %}
    </developers>
    {% endif %}

    {% if contributors %}
    <contributors>
        {% for contrib in contributors %}
        <contributor>
            <!-- üôã contrib.name: Nome do contribuinte. -->
            <name>{{ contrib.name }}</name>
            <!-- üìß contrib.email: E-mail do contribuinte. -->
            <email>{{ contrib.email }}</email>
            {% if contrib.url %}
            <!-- üåê contrib.url: URL do perfil ou site do contribuinte. -->
            <url>{{ contrib.url }}</url>
            {% endif %}
            {% if contrib.organization %}
            <!-- üè¢ contrib.organization: Organiza√ß√£o do contribuinte. -->
            <organization>{{ contrib.organization }}</organization>
            {% endif %}
            {% if contrib.organizationUrl %}
            <!-- üåê contrib.organizationUrl: Site da organiza√ß√£o do contribuinte. -->
            <organizationUrl>{{ contrib.organizationUrl }}</organizationUrl>
            {% endif %}
            {% if contrib.roles %}
            <!-- üé≠ contrib.roles: Pap√©is do contribuinte (ex.: "Tester", "Doc Writer"). -->
            <roles>
                {% for role in contrib.roles %}
                <role>{{ role }}</role>
                {% endfor %}
            </roles>
            {% endif %}
        </contributor>
        {% endfor %}
    </contributors>
    {% endif %}


    {# ----------------------------------------------------------#}
    {# üîß (5) Propriedades gerais (properties)                         #}
    {# ----------------------------------------------------------#}
    {% if properties %}
    <properties>
        {% for key, value in properties.items() %}
        <!-- üè∑Ô∏è {{ key }}: Propriedade definida, pode ser vers√£o de depend√™ncia, plugin,
             codifica√ß√£o, configura√ß√£o de compilador, etc. -->
        <{{ key }}>{{ value }}</{{ key }}>
        {% endfor %}
    </properties>
    {% endif %}


    {# ----------------------------------------------------------#}
    {# üì¶ (6) Se√ß√£o de m√≥dulos (modules)                               #}
    {#    Somente para Parent POM que agrupa subm√≥dulos               #}
    {#    Em um BOM puro, geralmente fica vazio ou √© omitido.         #}
    {# ----------------------------------------------------------#}
    {% if modules %}
    <modules>
        {% for module in modules %}
        <!-- üìÅ module: Nome do subm√≥dulo (nome da pasta relativa). -->
        <module>{{ module }}</module>
        {% endfor %}
    </modules>
    {% endif %}


    {# ----------------------------------------------------------#}
    {# üìë (7) dependencyManagement                                      #}
    {#    Importante em BOMs para unificar vers√µes de depend√™ncias.    #}
    {#    Em Parent POM, serve para fixar vers√µes que filhos usar√£o.    #}
    {# ----------------------------------------------------------#}
    {% if dependencyManagement %}
    <dependencyManagement>
        <dependencies>
            {% for dep in dependencyManagement %}
            <dependency>
                <!-- üÜî dep.groupId: Grupo da depend√™ncia. -->
                <groupId>{{ dep.groupId }}</groupId>
                <!-- üìõ dep.artifactId: Artefato da depend√™ncia. -->
                <artifactId>{{ dep.artifactId }}</artifactId>
                <!-- üè∑Ô∏è dep.version: Vers√£o unificada para essa depend√™ncia. -->
                <version>{{ dep.version }}</version>
                {% if dep.scope %}
                <!-- ‚öôÔ∏è dep.scope: Escopo da depend√™ncia (ex.: "compile", "test"). -->
                <scope>{{ dep.scope }}</scope>
                {% endif %}
                {% if dep.type %}
                <!-- üì¶ dep.type: Tipo de empacotamento (ex.: "jar", "war"). -->
                <type>{{ dep.type }}</type>
                {% endif %}
                {% if dep.classifier %}
                <!-- üè∑Ô∏è dep.classifier: Classificador para diferenciar artefatos (ex.: "sources"). -->
                <classifier>{{ dep.classifier }}</classifier>
                {% endif %}
            </dependency>
            {% endfor %}
        </dependencies>
    </dependencyManagement>
    {% endif %}


    {# ----------------------------------------------------------#}
    {# üìö (8) Se√ß√£o de depend√™ncias diretas (dependencies)               #}
    {#    - Em um BOM puro, geralmente n√£o h√° depend√™ncias diretas.     #}
    {#    - Em um Parent POM, podem haver depend√™ncias comuns de teste.   #}
    {# ----------------------------------------------------------#}
    {% if dependencies %}
    <dependencies>
        {% for dep in dependencies %}
        <dependency>
            <!-- üÜî dep.groupId: Grupo da depend√™ncia. -->
            <groupId>{{ dep.groupId }}</groupId>
            <!-- üìõ dep.artifactId: Artefato a ser inclu√≠do. -->
            <artifactId>{{ dep.artifactId }}</artifactId>
            {% if dep.version %}
            <!-- üè∑Ô∏è dep.version: Vers√£o espec√≠fica desta depend√™ncia. -->
            <version>{{ dep.version }}</version>
            {% endif %}
            {% if dep.scope %}
            <!-- ‚öôÔ∏è dep.scope: Escopo (ex.: "compile", "provided", "runtime", "test"). -->
            <scope>{{ dep.scope }}</scope>
            {% endif %}
            {% if dep.type %}
            <!-- üì¶ dep.type: Tipo (ex.: "jar", "pom", etc.). -->
            <type>{{ dep.type }}</type>
            {% endif %}
            {% if dep.classifier %}
            <!-- üè∑Ô∏è dep.classifier: Classificador (ex.: "sources", "javadoc"). -->
            <classifier>{{ dep.classifier }}</classifier>
            {% endif %}
        </dependency>
        {% endfor %}
    </dependencies>
    {% endif %}


    {# ----------------------------------------------------------#}
    {# üåê (9) Reposit√≥rios (repositories)                               #}
    {#    Define locais al√©m do Central para baixar depend√™ncias.       #}
    {# ----------------------------------------------------------#}
    {% if repositories %}
    <repositories>
        {% for repo in repositories %}
        <repository>
            <!-- üÜî repo.id: Identificador deste reposit√≥rio (ex.: "mulesoft-release"). -->
            <id>{{ repo.id }}</id>
            <!-- üîó repo.url: URL base para resolu√ß√£o de depend√™ncias. -->
            <url>{{ repo.url }}</url>
            {% if repo.releases %}
            <releases>
                {% if repo.releases.enabled is not none %}
                <!-- ‚úÖ releases.enabled: Habilita (true) ou desabilita (false) buscas de release. -->
                <enabled>{{ repo.releases.enabled }}</enabled>
                {% endif %}
                {% if repo.releases.updatePolicy %}
                <!-- üîÑ releases.updatePolicy: Pol√≠tica de atualiza√ß√£o (ex.: "always", "daily"). -->
                <updatePolicy>{{ repo.releases.updatePolicy }}</updatePolicy>
                {% endif %}
            </releases>
            {% endif %}
            {% if repo.snapshots %}
            <snapshots>
                {% if repo.snapshots.enabled is not none %}
                <!-- ‚úÖ snapshots.enabled: Habilita (true) ou desabilita (false) buscas de snapshot. -->
                <enabled>{{ repo.snapshots.enabled }}</enabled>
                {% endif %}
                {% if repo.snapshots.updatePolicy %}
                <!-- üîÑ snapshots.updatePolicy: Pol√≠tica de atualiza√ß√£o para snapshots. -->
                <updatePolicy>{{ repo.snapshots.updatePolicy }}</updatePolicy>
                {% endif %}
            </snapshots>
            {% endif %}
        </repository>
        {% endfor %}
    </repositories>
    {% endif %}


    {# ----------------------------------------------------------#}
    {# üîå (10) Plugin Repositories (pluginRepositories)                  #}
    {#    Para baixar plugins Maven que n√£o est√£o no reposit√≥rio central. #}
    {# ----------------------------------------------------------#}
    {% if pluginRepositories %}
    <pluginRepositories>
        {% for pluginRepo in pluginRepositories %}
        <pluginRepository>
            <!-- üÜî pluginRepo.id: Identificador para reposit√≥rio de plugins. -->
            <id>{{ pluginRepo.id }}</id>
            <!-- üîó pluginRepo.url: URL para resolu√ß√£o de plugins. -->
            <url>{{ pluginRepo.url }}</url>
            {% if pluginRepo.releases %}
            <releases>
                {% if pluginRepo.releases.enabled is not none %}
                <!-- ‚úÖ releases.enabled: Habilita buscas de release para plugins. -->
                <enabled>{{ pluginRepo.releases.enabled }}</enabled>
                {% endif %}
            </releases>
            {% endif %}
            {% if pluginRepo.snapshots %}
            <snapshots>
                {% if pluginRepo.snapshots.enabled is not none %}
                <!-- ‚úÖ snapshots.enabled: Habilita buscas de snapshots para plugins. -->
                <enabled>{{ pluginRepo.snapshots.enabled }}</enabled>
                {% endif %}
            </snapshots>
            {% endif %}
        </pluginRepository>
        {% endfor %}
    </pluginRepositories>
    {% endif %}


    {# ----------------------------------------------------------#}
    {# üõ†Ô∏è (11) Build (PluginManagement e Plugins)                        #}
    {#    - PluginManagement: fixar vers√µes de plugins (Parent POM).    #}
    {#    - Plugins diretos: configurar plugins espec√≠ficos (opcional).   #}
    {#    Macro recursiva para renderizar configura√ß√µes arbitr√°rias.      #}
    {# ----------------------------------------------------------#}

    {# üß© Macro: render_dict                                            #}
    {#    Fun√ß√£o recursiva que itera sobre dicion√°rios para montar        #}
    {#    tags XML arbitr√°rias (<key>valor</key>).                       #}
    {#    √ötil para configura√ß√µes personalizadas de plugins/executions.  #}
    {%- macro render_dict(d, indent='        ') -%}
    {%-   for key, val in d.items() %}
    {%-     if val is mapping %}
    {{ indent }}<{{ key }}>
    {{ render_dict(val, indent + '    ') }}
    {{ indent }}</{{ key }}>
    {%-     elif val is iterable and not (val is string) %}
    {%-       for item in val %}
    {%-         if item is mapping %}
    {{ indent }}<{{ key }}>
    {{ render_dict(item, indent + '    ') }}
    {{ indent }}</{{ key }}>
    {%-         else %}
    {{ indent }}<{{ key }}>{{ item }}</{{ key }}>
    {%-         endif %}
    {%-       endfor %}
    {%-     else %}
    {{ indent }}<{{ key }}>{{ val }}</{{ key }}>
    {%-     endif %}
    {%-   endfor %}
    {%- endmacro %}

    {% if build %}
    <build>
        {% if build.sourceDirectory %}
        <!-- üìÇ sourceDirectory: Caminho das classes fonte (padr√£o: "src/main/java"). -->
        <sourceDirectory>{{ build.sourceDirectory }}</sourceDirectory>
        {% endif %}
        {% if build.testSourceDirectory %}
        <!-- üìÇ testSourceDirectory: Caminho dos testes (padr√£o: "src/test/java"). -->
        <testSourceDirectory>{{ build.testSourceDirectory }}</testSourceDirectory>
        {% endif %}
        {% if build.finalName %}
        <!-- üè∑Ô∏è finalName: Nome final do artefato gerado (sem extens√£o). -->
        <finalName>{{ build.finalName }}</finalName>
        {% endif %}
        {% if build.defaultGoal %}
        <!-- üéØ defaultGoal: Meta padr√£o para este build (por ex.: "install"). -->
        <defaultGoal>{{ build.defaultGoal }}</defaultGoal>
        {% endif %}

        {# -------------(11a) PluginManagement (fixa vers√µes) -------------#}
        {% if build.pluginManagement and build.pluginManagement.plugins %}
        <pluginManagement>
            <plugins>
                {% for p in build.pluginManagement.plugins %}
                <plugin>
                    <!-- üÜî p.groupId: Grupo do plugin (ex.: "org.apache.maven.plugins"). -->
                    <groupId>{{ p.groupId }}</groupId>
                    <!-- üìõ p.artifactId: Artefato do plugin (ex.: "maven-compiler-plugin"). -->
                    <artifactId>{{ p.artifactId }}</artifactId>
                    <!-- üè∑Ô∏è p.version: Vers√£o fixa do plugin (ex.: "3.8.1"). -->
                    <version>{{ p.version }}</version>
                    {% if p.extensions is not none %}
                    <!-- üîå p.extensions: Se este plugin estende o ciclo de vida do Maven. -->
                    <extensions>{{ p.extensions }}</extensions>
                    {% endif %}

                    {# üîß Configura√ß√£o arbitr√°ria via render_dict #}
                    {% if p.configuration %}
                    <configuration>
{{ render_dict(p.configuration, '                        ') }}
                    </configuration>
                    {% endif %}

                    {# üöÄ Executions do plugin (ex.: fases e metas personalizadas) #}
                    {% if p.executions %}
                    <executions>
                        {% for ex in p.executions %}
                        <execution>
                            <!-- üè∑Ô∏è ex.id: Identificador desta execu√ß√£o (ex.: "default-compile"). -->
                            <id>{{ ex.id }}</id>
                            <!-- ‚è±Ô∏è ex.phase: Fase do ciclo de vida do Maven (ex.: "compile", "test"). -->
                            <phase>{{ ex.phase }}</phase>
                            {% if ex.goals %}
                            <!-- üéØ ex.goals: Metas a ser executadas (ex.: "compile", "test-compile"). -->
                            <goals>
                                {% for g in ex.goals %}
                                <goal>{{ g }}</goal>
                                {% endfor %}
                            </goals>
                            {% endif %}
                            {% if ex.configuration %}
                            <!-- üîß ex.configuration: Configura√ß√£o espec√≠fica para esta execu√ß√£o. -->
                            <configuration>
{{ render_dict(ex.configuration, '                                    ') }}
                            </configuration>
                            {% endif %}
                        </execution>
                        {% endfor %}
                    </executions>
                    {% endif %}

                </plugin>
                {% endfor %}
            </plugins>
        </pluginManagement>
        {% endif %}

        {# -------------(11b) Plugins diretos (sem fixar vers√µes) -----------#}
        {% if build.plugins %}
        <plugins>
            {% for plugin in build.plugins %}
            <plugin>
                <!-- üÜî plugin.groupId: Grupo do plugin. -->
                <groupId>{{ plugin.groupId }}</groupId>
                <!-- üìõ plugin.artifactId: Artefato do plugin. -->
                <artifactId>{{ plugin.artifactId }}</artifactId>
                {% if plugin.version %}
                <!-- üè∑Ô∏è plugin.version: Vers√£o espec√≠fica (opcional). -->
                <version>{{ plugin.version }}</version>
                {% endif %}
                {% if plugin.extensions is not none %}
                <!-- üîå plugin.extensions: Permite que o plugin estenda o ciclo de vida. -->
                <extensions>{{ plugin.extensions }}</extensions>
                {% endif %}

                {% if plugin.configuration %}
                <!-- üîß plugin.configuration: Configura√ß√£o geral do plugin. -->
                <configuration>
{{ render_dict(plugin.configuration, '                        ') }}
                </configuration>
                {% endif %}

                {% if plugin.executions %}
                <!-- üöÄ plugin.executions: Definem fases e metas espec√≠ficas. -->
                <executions>
                    {% for ex in plugin.executions %}
                    <execution>
                        <id>{{ ex.id }}</id>
                        <phase>{{ ex.phase }}</phase>
                        {% if ex.goals %}
                        <goals>
                            {% for g in ex.goals %}
                            <goal>{{ g }}</goal>
                            {% endfor %}
                        </goals>
                        {% endif %}
                        {% if ex.configuration %}
                        <configuration>
{{ render_dict(ex.configuration, '                                    ') }}
                        </configuration>
                        {% endif %}
                    </execution>
                    {% endfor %}
                </executions>
                {% endif %}

            </plugin>
            {% endfor %}
        </plugins>
        {% endif %}

        {# -------------(11c) Recursos opcionais (resources) ---------------#}
        {% if build.resources %}
        <resources>
            {% for res in build.resources %}
            <resource>
                <!-- üìÅ res.directory: Diret√≥rio das resources (ex.: "src/main/resources"). -->
                <directory>{{ res.directory }}</directory>
                {% if res.includes %}
                <!-- ‚úÖ res.includes: Padr√µes de arquivos a incluir (ex.: "**/*.xml"). -->
                <includes>
                    {% for inc in res.includes %}<include>{{ inc }}</include>{% endfor %}
                </includes>
                {% endif %}
                {% if res.excludes %}
                <!-- ‚ùå res.excludes: Padr√µes de arquivos a excluir (ex.: "**/*.bak"). -->
                <excludes>
                    {% for exc in res.excludes %}<exclude>{{ exc }}</exclude>{% endfor %}
                </excludes>
                {% endif %}
            </resource>
            {% endfor %}
        </resources>
        {% endif %}

        {% if build.testResources %}
        <testResources>
            {% for tres in build.testResources %}
            <testResource>
                <!-- üìÅ tres.directory: Diret√≥rio de test resources (ex.: "src/test/resources"). -->
                <directory>{{ tres.directory }}</directory>
                {% if tres.includes %}
                <includes>
                    {% for inc in tres.includes %}<include>{{ inc }}</include>{% endfor %}
                </includes>
                {% endif %}
                {% if tres.excludes %}
                <excludes>
                    {% for exc in tres.excludes %}<exclude>{{ exc }}</exclude>{% endfor %}
                </excludes>
                {% endif %}
            </testResource>
            {% endfor %}
        </testResources>
        {% endif %}

    </build>
    {% endif %}


    {# ----------------------------------------------------------#}
    {# üìä (12) Reporting (relat√≥rios)                                   #}
    {#    Caso gere relat√≥rios (Cobertura, Checkstyle, Javadoc, etc.).   #}
    {# ----------------------------------------------------------#}
    {% if reporting %}
    <reporting>
        {% if reporting.excludeDefaults is not none %}
        <!-- ‚ùå excludeDefaults: Impede plugins padr√£o de gera√ß√£o de relat√≥rios. -->
        <excludeDefaults>{{ reporting.excludeDefaults }}</excludeDefaults>
        {% endif %}
        {% if reporting.plugins %}
        <plugins>
            {% for rplugin in reporting.plugins %}
            <plugin>
                <!-- üÜî rplugin.groupId: Grupo do plugin de relat√≥rio (ex.: "org.apache.maven.plugins"). -->
                <groupId>{{ rplugin.groupId }}</groupId>
                <!-- üìõ rplugin.artifactId: Artefato do plugin (ex.: "maven-surefire-report-plugin"). -->
                <artifactId>{{ rplugin.artifactId }}</artifactId>
                {% if rplugin.version %}
                <!-- üè∑Ô∏è rplugin.version: Vers√£o do plugin de relat√≥rio. -->
                <version>{{ rplugin.version }}</version>
                {% endif %}
                {% if rplugin.configuration %}
                <!-- üîß rplugin.configuration: Configura√ß√µes espec√≠ficas (ex.: formato do relat√≥rio). -->
                <configuration>
                    {% for key, val in rplugin.configuration.items() %}
                    <{{ key }}>{{ val }}</{{ key }}>
                    {% endfor %}
                </configuration>
                {% endif %}
                {% if rplugin.dependencies %}
                <!-- üì¶ rplugin.dependencies: Depend√™ncias necess√°rias para o plugin de relat√≥rio. -->
                <dependencies>
                    {% for rpdep in rplugin.dependencies %}
                    <dependency>
                        <groupId>{{ rpdep.groupId }}</groupId>
                        <artifactId>{{ rpdep.artifactId }}</artifactId>
                        <version>{{ rpdep.version }}</version>
                        {% if rpdep.scope %}
                        <scope>{{ rpdep.scope }}</scope>
                        {% endif %}
                    </dependency>
                    {% endfor %}
                </dependencies>
                {% endif %}
            </plugin>
            {% endfor %}
        </plugins>
        {% endif %}
    </reporting>
    {% endif %}


    {# ----------------------------------------------------------#}
    {# üöö (13) DistributionManagement (distribui√ß√£o)                      #}
    {#    Define onde publicar releases e snapshots do BOM/Parent.        #}
    {# ----------------------------------------------------------#}
    {% if distributionManagement %}
    <distributionManagement>
        {% if distributionManagement.repository %}
        <repository>
            <!-- üÜî repository.id: Identificador do reposit√≥rio de release. -->
            <id>{{ distributionManagement.repository.id }}</id>
            <!-- üìõ repository.name: Nome leg√≠vel (ex.: "Acme Release Repo"). -->
            <name>{{ distributionManagement.repository.name }}</name>
            <!-- üîó repository.url: URL para publicar releases. -->
            <url>{{ distributionManagement.repository.url }}</url>
            {% if distributionManagement.repository.layout %}
            <!-- üóÇÔ∏è repository.layout: Layout (ex.: "default", "legacy"). -->
            <layout>{{ distributionManagement.repository.layout }}</layout>
            {% endif %}
        </repository>
        {% endif %}
        {% if distributionManagement.snapshotRepository %}
        <snapshotRepository>
            <!-- üÜî snapshotRepository.id: Identificador do reposit√≥rio de snapshots. -->
            <id>{{ distributionManagement.snapshotRepository.id }}</id>
            <!-- üìõ snapshotRepository.name: Nome leg√≠vel do reposit√≥rio de snapshots. -->
            <name>{{ distributionManagement.snapshotRepository.name }}</name>
            <!-- üîó snapshotRepository.url: URL para publicar snapshots. -->
            <url>{{ distributionManagement.snapshotRepository.url }}</url>
            {% if distributionManagement.snapshotRepository.layout %}
            <!-- üóÇÔ∏è snapshotRepository.layout: Layout do reposit√≥rio (ex.: "default"). -->
            <layout>{{ distributionManagement.snapshotRepository.layout }}</layout>
            {% endif %}
        </snapshotRepository>
        {% endif %}
        {% if distributionManagement.site %}
        <site>
            <!-- üÜî site.id: Identificador do site de distribui√ß√£o de artefatos. -->
            <id>{{ distributionManagement.site.id }}</id>
            <!-- üìõ site.name: Nome leg√≠vel para o site (ex.: "Website do Projeto"). -->
            <name>{{ distributionManagement.site.name }}</name>
            <!-- üîó site.url: URL do site p√∫blico ou privado. -->
            <url>{{ distributionManagement.site.url }}</url>
        </site>
        {% endif %}
        {% if distributionManagement.directory %}
        <!-- üìÅ directory: Diret√≥rio local onde artefatos podem ser empacotados. -->
        <directory>{{ distributionManagement.directory }}</directory>
        {% endif %}
    </distributionManagement>
    {% endif %}


    {# ----------------------------------------------------------#}
    {# üéØ (14) Profiles de build (profiles)                              #}
    {#    Permitem varia√ß√µes de build dependendo de propriedades, CI,    #}
    {#    sistema operacional ou ativadores espec√≠ficos.                  #}
    {# ----------------------------------------------------------#}
    {% if profiles %}
    <profiles>
        {% for profile in profiles %}
        <profile>
            <!-- üè∑Ô∏è profile.id: Identificador √∫nico do perfil (ex.: "ci", "release"). -->
            <id>{{ profile.id }}</id>

            {% if profile.activation %}
            <activation>
                {% for key, val in profile.activation.items() %}
                <!-- üîÑ profile.activation: Defini√ß√µes de ativa√ß√£o (ex.: os.name, property, jdk). -->
                <{{ key }}>{{ val }}</{{ key }}>
                {% endfor %}
            </activation>
            {% endif %}

            {% if profile.properties %}
            <properties>
                {% for key, val in profile.properties.items() %}
                <!-- üè∑Ô∏è profile.properties: Propriedades espec√≠ficas para este perfil. -->
                <{{ key }}>{{ val }}</{{ key }}>
                {% endfor %}
            </properties>
            {% endif %}

            {% if profile.dependencyManagement %}
            <dependencyManagement>
                <dependencies>
                    {% for dep in profile.dependencyManagement %}
                    <dependency>
                        <groupId>{{ dep.groupId }}</groupId>
                        <artifactId>{{ dep.artifactId }}</artifactId>
                        <version>{{ dep.version }}</version>
                        {% if dep.scope %}
                        <scope>{{ dep.scope }}</scope>
                        {% endif %}
                    </dependency>
                    {% endfor %}
                </dependencies>
            </dependencyManagement>
            {% endif %}

            {% if profile.dependencies %}
            <dependencies>
                {% for dep in profile.dependencies %}
                <dependency>
                    <groupId>{{ dep.groupId }}</groupId>
                    <artifactId>{{ dep.artifactId }}</artifactId>
                    <version>{{ dep.version }}</version>
                    {% if dep.scope %}
                    <scope>{{ dep.scope }}</scope>
                    {% endif %}
                </dependency>
                {% endfor %}
            </dependencies>
            {% endif %}

            {% if profile.build %}
            <build>
                {% if profile.build.plugins %}
                <plugins>
                    {% for p in profile.build.plugins %}
                    <plugin>
                        <groupId>{{ p.groupId }}</groupId>
                        <artifactId>{{ p.artifactId }}</artifactId>
                        <version>{{ p.version }}</version>
                        {% if p.configuration %}
                        <!-- üîß p.configuration: Configura√ß√£o espec√≠fica de plugin para este perfil. -->
                        <configuration>
                            {% for key, val in p.configuration.items() %}
                            <{{ key }}>{{ val }}</{{ key }}>
                            {% endfor %}
                        </configuration>
                        {% endif %}
                    </plugin>
                    {% endfor %}
                </plugins>
                {% endif %}
            </build>
            {% endif %}
        </profile>
        {% endfor %}
    </profiles>
    {% endif %}

</project>
